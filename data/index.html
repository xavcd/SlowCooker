<!DOCTYPE html>
<html>
  <body>
    <p id="current-temperature">Temperature: Updating...</p>


    <script>
      function updateTemperature() {
        var temperatureElement = document.getElementById("current-temperature");
        var tempMin2Element = document.getElementById("min-temp-2");
        var tempMax2Element = document.getElementById("max-temp-2");
        var tempMin5Element = document.getElementById("min-temp-5");
        var tempMax5Element = document.getElementById("max-temp-5");
        
        var xml = new XMLHttpRequest();
        xml.open("GET", "/getTemperature", true);

        xml.onreadystatechange = function () {
          if (xml.readyState == 4 && xml.status == 200) {
            var responseData = JSON.parse(xml.responseText);
            var tempMijoteuse = responseData.temperature;
            var tempMin2 = responseData.tempMin2;
            var tempMax2 = responseData.tempMax2;
            var tempMin5 = responseData.tempMin5;
            var tempMax5 = responseData.tempMax5;
            var decimalCount = 2;

            temperatureElement.innerHTML = 
                toString(tempMijoteuse.toFixed(decimalCount)) + "°C";
            tempMin2Element.innerHTML = toString(tempMin2.toFixed(decimalCount)) + "°C";
            tempMax2Element.innerHTML = toString(tempMax2.toFixed(decimalCount)) + "°C";
            tempMin5Element.innerHTML = toString(tempMin5.toFixed(decimalCount)) + "°C";
            tempMax5Element.innerHTML = toString(tempMax5.toFixed(decimalCount)) + "°C";
          }
        };
        xml.send();
      }

      setInterval(updateTemperature, 1000);
    </script>
  </body>
</html>
